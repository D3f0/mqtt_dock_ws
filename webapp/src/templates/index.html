<!DOCTYPE html>
<html>
<head>
    <title>
        {% if title %}{{ title }}{%else%}MQTT Docker{%endif%}
    </title>
    <script type="text/javascript"
    src="{{ bower_component('paho.mqtt.js/src/mqttws31.js') }}"></script>
    <script type="text/javascript"
    src="{{ bower_component('web-mqtt-client/mqtt-client.js') }}"></script>
    <script type="text/javascript"
    src="{{ bower_component('jQuery/dist/jquery.js') }}"></script>
</head>
<body>
{% block body %}
    <h1>Hello world!</h1>
{% endblock body %}


    <script type="text/javascript">
    $(function () {

        var client = new MqttClient({
        host : 'localhost',
        port : 8081,
        will : {
            topic   : 'farewells',
            payload : 'So long!',
        }
        });
        console.log("Client:", client);
        client.on('connecting', function() { console.log('connecting...'); })
        .on('connect', function() { console.log("hooraah, I'm connected"); })
        .on('disconnect', function() { console.log('oh noes!'); })
        .on('offline', function() { console.log('stopped trying, call connect manually'); });

        console.info("Connect!");
        client.connect();
    });

    </script>

</body>
</html>
